<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>VidaPlus - Cadastro</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        
        <div class="logo-area">
            <img src="{{ url_for('static', filename='img/logo.png') }}"
                 alt="Logo VidaPlus"
                 class="logo">
        </div>

        <div class="cadastro-area">
            <h2 class="titulo">Criar Conta</h2>
            <h3 class="subtitulo">Preencha os dados para continuar</h3>
            {% if erro %}
                <p class="msg-erro">{{ erro }}</p>
            {% endif %}

            <form action="{{ url_for('cadastro') }}" method="POST">

                <label for="usuario">Nome completo</label>
                <input
                    type="text"
                    id="usuario"
                    name="usuario"
                    placeholder="Digite seu nome"
                    required
                >

                <label for="CPF">CPF</label>
                <input
                    type="text"
                    id="CPF"
                    name="CPF"
                    placeholder="000.000.000-00"
                    autocomplete="off"
                    required
                >

                <label for="senha">Senha</label>
                <input
                    type="password"
                    id="senha"
                    name="senha"
                    placeholder="Crie uma senha"
                    required
                >

                <button type="submit">Cadastrar</button>

                <p class="cadastro" style="margin-top: 25px;">
                    JÃ¡ possui uma conta?
                    <a href="{{ url_for('index') }}">Entrar</a>
                </p>
            </form>
        </div>
    </div>

    <script>
        const cpfInput = document.getElementById("CPF");

        if (cpfInput) {
            cpfInput.addEventListener("input", () => {
                let value = cpfInput.value.replace(/\D/g, "");

                if (value.length > 11) value = value.slice(0, 11);

                if (value.length > 9) {
                    cpfInput.value = value.replace(
                        /(\d{3})(\d{3})(\d{3})(\d{1,2})/,
                        "$1.$2.$3-$4"
                    );
                } else if (value.length > 6) {
                    cpfInput.value = value.replace(
                        /(\d{3})(\d{3})(\d{1,3})/,
                        "$1.$2.$3"
                    );
                } else if (value.length > 3) {
                    cpfInput.value = value.replace(
                        /(\d{3})(\d{1,3})/,
                        "$1.$2"
                    );
                } else {
                    cpfInput.value = value;
                }
            });
        }
    </script>
</body>
</html>
